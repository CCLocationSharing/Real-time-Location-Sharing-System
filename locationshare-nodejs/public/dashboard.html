{% extends "base.html" %}

{% block body %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>
<div class="container-fluid">
    <div class="row">
        <main role="main" class="col-md-9 col-md-9 pt-3 px-4">
            <h2>Study Space Status</h2>
            <div class="table-responsive">
                <table id="library-status" class="table table-striped table-sm">
                </table>
            </div>
            <h2></h2>
            <canvas id="libChart" width="900" height="380" >    
            </canvas>
        </main>

        <div class="col-sm-3 col-md-3 sidebar">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <i class="fa fa-tasks fa"></i>
                    Your Reservation
                </div>

                <div class="panel-body">
                    {% if orders.length === 0 %}
                        You don't have any reservation!
                    {% endif %}

                    {% for order in orders %}
                        <span class="list-group-item">
                            {{order.date}}: {{order.course}}<br>
                        </span>
                {% endfor %}
                </div>
            </div>
        </div>

        <div class="col-sm-3 col-md-3 sidebar">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <i class="fa fa-user"></i>
                    Friends List
                </div>

                <div class="panel-body" id="friend-list">
                    {% for friend in session.user.friends %}
                        <a href="/profile?id={{friend}}" class="list-group-item" id="{{friend}}">
                        {{friend}}
                            <span style="float: right; color: {% if friend.online %}green{% else %}red{% endif %}">
                                ‚óè {% if friend.online %}online{% else %}offline{% endif %}
                            </span>
                        </a>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    var takenList = [];
    var capList = [];
    var libChart = new Chart($("#libChart"), {
        type: 'line',
        data: {
            labels: ['Olin Library', 'Gates Hall', 'Uris Hall', 'Carpenter Hall'],
            datasets: [{
                data: takenList,
                backgroundColor: '#ffad9a',
                fill: true,
                borderColor: '#f17659',
                borderWidth: 2,
                pointBackgroundColor: '#f17659'
            }, {
                data: capList,
                fill: false,
                borderColor: '#eca912',
                borderWidth: 2,
                pointBackgroundColor: '#eca912'
            }]     
        },
        options: {
            responsive: true,
            tooltips: {
                mode: 'index',
                intersect: true
            },
            legend: {
                display: false
            }
        }
    });
</script>
{% endblock %}
